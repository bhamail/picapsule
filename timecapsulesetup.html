<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M16 from src/site/markdown/timecapsulesetup.md at 2024-02-18
 | Rendered using Apache Maven Fluido Skin 2.0.0-M8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M16" />
    <title>PiCapsule – Time Capsule Setup</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0-M8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0-M8.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-02-18<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html"><span class="icon-chevron-down"></span>Introduction</a>
     <ul class="nav nav-list">
      <li><a href="supplies.html">Supplies</a></li>
      <li><a href="setup.html"><span class="icon-chevron-down"></span>Setup</a>
       <ul class="nav nav-list">
        <li><a href="sdcardsetup.html">SD Card Setup</a></li>
        <li><a href="ossetup.html">OS Setup</a></li>
        <li class="active"><a>Time Capsule Setup</a></li>
       </ul></li>
      <li><a href="docdocs.html">Doc docs</a></li>
     </ul></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section>
<h1>Time Capsule Setup</h1>
<p>To mimic a Time Capsule, we need a <a href="https://en.wikipedia.org/wiki/Network-attached_storage" class="externalLink">NAS (network-attached storage) Drive</a>.
This is basically a drive that is shared on the network in a manner that allows other computers on the network to read
and write to the shared disk.</p>
<p>The protocol used to share this disk will be Server Message Block (SMB - aka: Samba). To make it easier for
Apple Time Machine to find this disk, we will make it advertise itself as a Time Capsule.</p>
<ol style="list-style-type: decimal;">

<li>
<p>Use <code>ssh</code> to connect to your Raspberry Pi:</p>

<div class="verbatim">
<pre><code class="language-shell">ssh pi@raspberrypi-time
</code></pre></div></li>
<li>
<p>Follow these instructions to install Samba, and connect your USB hard drive:
<a href="https://saschaeggi.medium.com/use-a-raspberry-pi-4-for-time-machine-works-with-big-sur-1e66a9650789" class="externalLink">Use a Raspberry Pi 4 for Time Machine Backups</a>.</p>
<p>The above instructions do not go into great detail about how to format and mount your external USB
drive on the Pi, so I found this page helpful:<br />
<a href="https://raspberrytips.com/format-mount-usb-drive/" class="externalLink">Format USB Drive</a> -&gt; See: &#x201c;Format USB drives with a command line&#x201d;.</p>
<p>As an example, here's the contents of <code>/etc/fstab</code> on my <code>raspberrypi-time</code> host:</p>

<div class="verbatim">
<pre><code class="language-shell"># added by Dan for TimeMachine backups
# https://raspberrytips.com/format-mount-usb-drive/
# https://saschaeggi.medium.com/use-a-raspberry-pi-4-for-time-machine-works-with-big-sur-1e66a9650789
UUID=73c1affc-d29c-4246-969e-adf90d71a23e /mnt/timemachine ext4 sync,noexec,nodev,noatime,nodiratime 0 0
</code></pre></div></li>
<li>
<p>Since this Raspberry Pi is most likely headless, and you never really directly interact with it,
you should have it setup to email you about its status. You should also set up this Pi to automatically
update itself every night with the latest software patches available.
See: <a href="https://www.matt-black.tech/posts/Unattended-Upgrades-with-Email-Notifications-Keeping-Your-Raspberry-Pi-Secure/" class="externalLink">Unattended Upgrades with Email Notifications</a></p></li>
</ol>
<p>Many thanks to the authors of the above links!</p>
<p>Next step: <a href="docdocs.html">Doc docs</a></p></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2024
</p>
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>